create database FlightManagementSystem;
create table Airport(
AirportCode varchar(25),
AirportName varchar(50),
City varchar(25),
Country varchar(50),
Established_Year int,
constraint pk_AirportCode primary key(AirportCode)
);

create table Airline(
AirlineCode varchar(25),
AirlineName varchar(50),
AirlineOwner varchar(50),
FleetSize int,
Address varchar(100),
NoOfDestinations int,
HeadOfficeEmail varchar(50),
WebsiteURL varchar(100),
CommensementYear int,
constraint pk_AirlineCode primary key(AirlineCode)
);

create table Aircraft(
AircraftCode varchar(25),
AircraftName varchar(25),
Model varchar(20),
Manufacturer varchar(20),
MaxNoOfSeats int,
AirlineCode varchar(25),
FlightNo varchar(25),
constraint pk_AircraftCode primary key(AircraftCode),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table Flight(
FlightNo varchar(25),
FlightPath varchar(100),
AirlineCode varchar(25),
FlightType varchar(20),
constraint pk_FlightNo primary key(FLightNo),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode)
);

create table Reservation(
TicketNo varchar(10),
class varchar(20),
SeatNo varchar(4),
CheckInTime date,
BaggageWeight float,
PassportNo varchar(50),
LegNo varchar(10),
constraint pk_TicketNo primary key(TicketNo),
constraint fk_LegNo_1 foreign key(LegNo) references Arrival(LegNo),
constraint fk_LegNo_2 foreign key(LegNo) references Departure(LegNo),
constraint fk_LegNo_3 foreign key(LegNo) references Delayed(LegNo),
constraint fk_LegNo_4 foreign key(LegNo) references Canceled(LegNo)
);
create table Passenger(
PassportNo varchar(50),
FirstName varchar(25),
LastName varchar(25),
Gender varchar(6),
Nationality varchar(50),
DOB date,
PassportIssueDate date,
PassportExpiryDate date,
TicketNo varchar(10),
constraint pk_PassportNo primary key(PassportNo),
constraint fk_TicketNo foreign key(TicketNo) references Reservation(TicketNo)
);

create table Arrival(
LegNo varchar(10),
ArrivalTerminalNo varchar(10),
ArrivalTime date,
BaggageBeltNo varchar(10),
FlightStatus varchar(20),
DateOfFlight date,
AircrewCheckInTime date,
AircraftCode varchar(25),
FlightNo varchar(25),
constraint pk_LegNoArrival primary key(LegNo),
constraint fk_AircraftCode foreign key(AircraftCode) references Aircraft(AircraftCode),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table Departure(
LegNo varchar(10),
DepartureTerminalNo varchar(10),
GateNo varchar(10),
BoardingTime date,
DepartureTime date,
FlightStatus varchar(20),
DateOfFlight date,
AircrewCheckInTime date,
AircraftCode varchar(25),
FlightNo varchar(25),
constraint pk_LegNoDeparture primary key(LegNo),
constraint fk_AircraftCode foreign key(AircraftCode) references Aircraft(AircraftCode),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table Delayed(
LegNo varchar(10),
Reason varchar(100),
FlightStatus varchar(20),
DateOfFlight date,
AircrewCheckInTime date,
AircraftCode varchar(25),
FlightNo varchar(25),
constraint pk_LegNoDelayed primary key(LegNo),
constraint fk_AircraftCode foreign key(AircraftCode) references Aircraft(AircraftCode),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table Canceled(
LegNo varchar(10),
Reason varchar(100),
FlightStatus varchar(20),
DateOfFlight date,
AircrewCheckInTime date,
AircraftCode varchar(25),
FlightNo varchar(25),
constraint pk_LegNoCanceled primary key(LegNo),
constraint fk_AircraftCode foreign key(AircraftCode) references Aircraft(AircraftCode),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table SpecialRequirements(
PassportNo varchar(50),
RequirementDetails varchar(200),
constraint pk_PassportNo_SpecialRequirements primary key(PassportNo)
);
create table Minor(
PassportNo varchar(50),
AccompanyPassportNo varchar(50),
constraint pk_PassportNo_Minor primary key(PassportNo)
);

create table AirlineContactNo(
AirlineCode varchar(25),
ContactNo int,
constraint pk_AirlineCode_ContactNo primary key(AirlineCode,ContactNo),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode)
);

create table Landing(
FlightNo varchar(25),
AirportName varchar(50),
constraint pk_FlightNo_AirportName_Landing primary key(FlightNo,AirportName),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table TakeOff(
FlightNo varchar(25),
AirportName varchar(50),
constraint pk_FlightNo_AirportName_TakeOff primary key(FlightNo,AirportName),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table ScheduleDays(
FlightNo varchar(25),
FlightDate date,
EstimatedArrivalTime date,
EstimatedDepartureTime date,
constraint pk_FlightNo_FlightDate primary key(FlightNo,FlightDate),
constraint fk_FlightNo foreign key(FlightNo) references Flight(FlightNo)
);

create table PassengerContactNo(
PassportNo varchar(50),
ContactNo int,
constraint pk_PassportNo_ContactNo primary key(PassportNo,ContactNo),
constraint fk_PassportNo foreign key(PassportNo) references Passenger(PassportNo)
);

create table Pilot(
StaffID varchar(25),
FirstName varchar(25),
LastName varchar(25),
PassportNo varchar(50),
Address varchar(100),
Gender varchar(7),
Designation varchar(25),
DateJoined date,
AirlineTrainingDetails varchar(200),
AcadamicEducationDetails varchar(200),
TotalFlyingHours int,
LegNo varchar(10),
AirlineCode varchar(25),
constraint pk_StaffID primary key(StaffID),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode),
constraint fk_LegNo_1 foreign key(LegNo) references Arrival(LegNo),
constraint fk_LegNo_2 foreign key(LegNo) references Departure(LegNo),
constraint fk_LegNo_3 foreign key(LegNo) references Delayed(LegNo),
constraint fk_LegNo_4 foreign key(LegNo) references Canceled(LegNo)
);

create table PilotFlownAircrafts(
StaffID varchar(25),
AircraftModel varchar(25),
FlyingHours int,
constraint pk_StaffID_AircraftModel primary key(StaffID,AircraftModel),
constraint fk_StaffID foreign key(StaffID) references Pilot(StaffID)
);

create table FlightAttendant(
StaffID varchar(25),
FirstName varchar(25),
LastName varchar(25),
PassportNo varchar(50),
Address varchar(100),
Gender varchar(7),
Designation varchar(25),
DateJoined date,
AirlineTrainingDetails varchar(200),
AcadamicEducationDetails varchar(200),
TotalFlyingHours int,
LegNo varchar(10),
AirlineCode varchar(25),
constraint pk_StaffID_Attendant primary key(StaffID),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode),
constraint fk_LegNo_1 foreign key(LegNo) references Arrival(LegNo),
constraint fk_LegNo_2 foreign key(LegNo) references Departure(LegNo),
constraint fk_LegNo_3 foreign key(LegNo) references Delayed(LegNo),
constraint fk_LegNo_4 foreign key(LegNo) references Canceled(LegNo)
);
create table PilotContactNo(
StaffID varchar(25),
ContactNo varchar(10),
constraint pk_StaffID_ContactNo primary key(StaffID,ContactNo),
constraint fk_StaffID foreign key(StaffID) references Pilot(StaffId)
);

create table FlightAttendantContactNo(
StaffID varchar(25),
ContactNo varchar(10),
constraint pk_StaffID_ContactNo_Attendant primary key(StaffID,ContactNo),
constraint fk_StaffID foreign key(StaffID) references FlightAttendant(StaffId)
);

create table ProvideServices(
AirlineCode varchar(25),
AirportCode varchar(25),
AirlineName varchar(50),
AirlineOwner varchar(50),
FleetSize int,
Address varchar(100),
NoOfDestinations int,
HeadOfficeEmail varchar(50),
WebsiteURL varchar(100),
CommensementYear int,
AirportName varchar(50),
City varchar(25),
Country varchar(50),
Established_Year int,
constraint pk_AirlineCode_AirportCode primary key(AirlineCode,AirportCode),
constraint fk_AirportCode foreign key(AirportCode) references Airport(AirportCode),
constraint fk_AirlineCode foreign key(AirlineCode) references Airline(AirlineCode)
);
 
